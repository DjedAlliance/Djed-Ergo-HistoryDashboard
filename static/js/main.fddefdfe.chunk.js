(this["webpackJsonpsigmausd-history"]=this["webpackJsonpsigmausd-history"]||[]).push([[0],{202:function(e,t,a){},203:function(e,t,a){},360:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(60),s=a.n(c),i=(a(202),a(26)),o=a(31),l=a(29),d=a(27),u=(a(203),a(204),a(37)),b=a(52),j=a.n(b),h=a(364),m=a(365),O=a(369),f=a(188),x=a(189),p=a(89),v=a(193),g=a(183),y=a(127),N=a.n(y);function k(){var e=w();return{start:e,end:e}}function w(){var e=u.DateTime.now().toUTC();return u.DateTime.utc(e.year,e.month,e.day)}function D(e){return"".concat(e.year,"-").concat(N()(e.month.toString(),2,"0"),"-").concat(N()(e.day.toString(),2,"0"))}var S=a(22),T=a.n(S),C=a(36),R=a(191),M=a(370),I=a(296),F=a(298).default,J=new I.Connection(new Worker(F));function K(e){return H.apply(this,arguments)}function H(){return(H=Object(C.a)(T.a.mark((function e(t){var a,r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D(t),r="".concat("/sigmausd-history","/data/daily/").concat(a,".json"),e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.initDb({name:"sigmausd",tables:[{name:"Items",columns:{id:{primaryKey:!0,dataType:"number"},time:{notNull:!0,dataType:"string"},reserveRatio:{notNull:!0,dataType:"string"},stableCoinPrice:{notNull:!0,dataType:"string"},stableCoinRatio:{notNull:!0,dataType:"string"},reserveCoinPrice:{notNull:!0,dataType:"string"},reserveCoinRatio:{notNull:!0,dataType:"string"}}}]});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(C.a)(T.a.mark((function e(t){var a,r,n,c,s;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=w(),r=a.equals(t)){e.next=9;break}return n=t.plus({days:1}).minus({minutes:5}),e.next=6,J.select({from:"Items",where:{id:{"-":{low:t.toMillis(),high:n.toMillis()}}}});case 6:if(!((c=e.sent).length>0)){e.next=9;break}return e.abrupt("return",c);case 9:return e.next=11,K(t);case 11:if(s=e.sent,r){e.next=15;break}return e.next=15,J.insert({into:"Items",upsert:!0,values:s.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{id:u.DateTime.fromISO(e.time).toMillis()})}))});case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return new M.a((function(t){var a=new R.a({concurrency:2});a.on("completed",(function(e){t.next(e)})),a.on("error",(function(e){t.error(e)})),a.addAll(e.map((function(e){return function(){return function(e){return P.apply(this,arguments)}(e).then((function(t){return[e,t]}))}}))).then((function(){return t.complete()}))}))}!function(){E.apply(this,arguments)}();var q=a(53),A=a.n(q),G=a(172),L=a.n(G),U=a(9),B=u.DateTime.utc(2021,5,9,13,38),_=function(){var e=Object(r.useState)({}),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(k()),s=Object(d.a)(c,2),b=s[0],y=s[1],N=Object(r.useCallback)((function(e,t){n((function(a){return Object(l.a)(Object(l.a)({},a),{},Object(o.a)({},e,t))}))}),[]);Object(r.useEffect)((function(){W(A()(b.end.diff(b.start,"days").days+1).map((function(e){return b.start.plus({days:e})}))).subscribe((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return N(D(a),r)}))}),[N,b]);var w=Object(r.useCallback)((function(e){if(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];n({}),y((function(e){var t=u.DateTime.fromJSDate(a),n=u.DateTime.fromJSDate(r);return t.equals(e.start)&&n.equals(e.end)?e:{start:t,end:n}}))}else n({}),y(k())}),[]),S=Object(r.useMemo)((function(){var e=j()(Object.keys(a)).reduce((function(e,t){var r;return[].concat(Object(i.a)(e),Object(i.a)(null!==(r=a[t])&&void 0!==r?r:[]))}),[]),t=Math.max(Math.ceil(e.length/100),1);return e.reduce((function(e,a,r){return r%t===0?[].concat(Object(i.a)(e),[{label:u.DateTime.fromISO(a.time).toLocaleString(u.DateTime.DATETIME_SHORT),reserveRatio:parseInt(a.reserveRatio,10),stable:Math.round(100*parseFloat(a.stableCoinRatio))/100,reserve:parseInt(a.reserveCoinRatio,10)}]):e}),[])}),[a]),T=Object(r.useMemo)((function(){return{value:[b.start.toJSDate(),b.end.toJSDate()],maxDate:u.DateTime.now().toJSDate(),minDate:B.toJSDate()}}),[b]);return Object(U.jsxs)("div",{className:"App container",children:[Object(U.jsx)("a",{className:"github-fork-ribbon",href:"https://github.com/bdkent/sigmausd-history","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub",target:"_blank",rel:"noreferrer",children:"Fork me on GitHub"}),Object(U.jsx)("h1",{children:"SigmaUSD History"}),Object(U.jsx)(L.a,Object(l.a)(Object(l.a)({},T),{},{onChange:w,format:"MMM d, y"})),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"row",children:Object(U.jsx)("div",{className:"col",children:Object(U.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(U.jsx)("div",{className:"card-header",children:"Reserve Ratio (%)"}),Object(U.jsx)("div",{className:"card-body ",children:Object(U.jsx)("div",{className:"reserveRatioChartWrapper",children:S&&Object(U.jsx)(h.a,{width:"100%",height:200,children:Object(U.jsxs)(m.a,{width:730,height:250,data:S,margin:{top:5,right:30,left:20,bottom:5},children:[Object(U.jsx)(O.a,{strokeDasharray:"3 3"}),Object(U.jsx)(f.a,{dataKey:"label"}),Object(U.jsx)(x.a,{}),Object(U.jsx)(p.a,{}),Object(U.jsx)(v.a,{type:"monotone",dataKey:"reserveRatio",stroke:"#8884d8"}),Object(U.jsx)(g.a,{y1:400,y2:800,fill:"green",opacity:.25,alwaysShow:!0})]})})})})]})})}),Object(U.jsxs)("div",{className:"row",children:[Object(U.jsx)("div",{className:"col",children:Object(U.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(U.jsx)("div",{className:"card-header",children:"SigmaUSD ($)"}),Object(U.jsx)("div",{className:"card-body ",children:Object(U.jsx)("div",{className:"reserveRatioChartWrapper",children:S&&Object(U.jsx)(h.a,{width:"100%",height:200,children:Object(U.jsxs)(m.a,{width:730,height:250,data:S,margin:{top:5,right:30,left:20,bottom:5},children:[Object(U.jsx)(O.a,{strokeDasharray:"3 3"}),Object(U.jsx)(f.a,{dataKey:"label"}),Object(U.jsx)(x.a,{}),Object(U.jsx)(p.a,{}),Object(U.jsx)(v.a,{type:"monotone",dataKey:"stable",stroke:"#8884d8"})]})})})})]})}),Object(U.jsx)("div",{className:"col",children:Object(U.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(U.jsx)("div",{className:"card-header",children:"SigmaRSV"}),Object(U.jsx)("div",{className:"card-body ",children:Object(U.jsx)("div",{className:"reserveRatioChartWrapper",children:S&&Object(U.jsx)(h.a,{width:"100%",height:200,children:Object(U.jsxs)(m.a,{width:730,height:250,data:S,margin:{top:5,right:30,left:20,bottom:5},children:[Object(U.jsx)(O.a,{strokeDasharray:"3 3"}),Object(U.jsx)(f.a,{dataKey:"label"}),Object(U.jsx)(x.a,{}),Object(U.jsx)(p.a,{}),Object(U.jsx)(v.a,{type:"monotone",dataKey:"reserve",stroke:"#8884d8"})]})})})})]})})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("footer",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(U.jsx)("div",{className:"container-fluid",children:Object(U.jsx)("ul",{className:"navbar-nav",children:Object(U.jsx)("li",{className:"nav-item",children:Object(U.jsx)("a",{href:"http://sigmausd.io",className:"nav-link",children:"sigmausd.io"})})})})})]})},V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,372)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},$=a(45),z=a(192);$.b.register(z.a),s.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(_,{})}),document.getElementById("root")),V()}},[[360,1,2]]]);
//# sourceMappingURL=main.fddefdfe.chunk.js.map