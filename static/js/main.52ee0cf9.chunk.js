(this["webpackJsonpsigmausd-history"]=this["webpackJsonpsigmausd-history"]||[]).push([[0],{193:function(e,t,a){},194:function(e,t,a){},336:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(73),s=a.n(c),i=(a(193),a(25)),o=a(30),l=a(28),d=a(26),u=(a(194),a(195),a(38)),b=a(50),j=a.n(b),h=a(339),m=a(340),O=a(344),x=a(179),p=a(180),f=a(84),v=a(184),g=a(174),y=a(121),N=a.n(y);function k(){var e=u.DateTime.now().toUTC();return u.DateTime.utc(e.year,e.month,e.day)}function w(e){return"".concat(e.year,"-").concat(N()(e.month.toString(),2,"0"),"-").concat(N()(e.day.toString(),2,"0"))}var T=a(21),D=a.n(T),S=a(35),C=a(182),R=a(345),F=a(287),I=a(289).default,L=new F.Connection(new Worker(I));function M(e){return K.apply(this,arguments)}function K(){return(K=Object(S.a)(D.a.mark((function e(t){var a,r,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=w(t),r="".concat("/sigmausd-history","/data/daily/").concat(a,".json"),e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(S.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.initDb({name:"sigmausd",tables:[{name:"Items",columns:{id:{primaryKey:!0,dataType:"number"},time:{notNull:!0,dataType:"string"},reserveRatio:{notNull:!0,dataType:"string"},stableCoinPrice:{notNull:!0,dataType:"string"},stableCoinRatio:{notNull:!0,dataType:"string"},reserveCoinPrice:{notNull:!0,dataType:"string"},reserveCoinRatio:{notNull:!0,dataType:"string"}}}]});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(S.a)(D.a.mark((function e(t){var a,r,n,c,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=k(),r=a.equals(t)){e.next=9;break}return n=t.plus({days:1}).minus({minutes:5}),e.next=6,L.select({from:"Items",where:{id:{"-":{low:t.toMillis(),high:n.toMillis()}}}});case 6:if(!((c=e.sent).length>0)){e.next=9;break}return e.abrupt("return",c);case 9:return e.next=11,M(t);case 11:if(s=e.sent,r){e.next=15;break}return e.next=15,L.insert({into:"Items",upsert:!0,values:s.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{id:u.DateTime.fromISO(e.time).toMillis()})}))});case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return new R.a((function(t){var a=new C.a({concurrency:2});a.on("completed",(function(e){t.next(e)})),a.on("error",(function(e){t.error(e)})),a.addAll(e.map((function(e){return function(){return function(e){return A.apply(this,arguments)}(e).then((function(t){return[e,t]}))}}))).then((function(){return t.complete()}))}))}!function(){E.apply(this,arguments)}();var P=a(51),U=a.n(P),W=a(5),_=function(){var e=Object(r.useState)({}),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(function(){var e=k();return{start:e,end:e}}()),s=Object(d.a)(c,2),b=s[0],y=s[1],N=Object(r.useCallback)((function(e,t){n((function(a){return Object(l.a)(Object(l.a)({},a),{},Object(o.a)({},e,t))}))}),[]);Object(r.useEffect)((function(){H(U()(b.end.diff(b.start,"days").days+1).map((function(e){return b.start.plus({days:e})}))).subscribe((function(e){var t=Object(d.a)(e,2),a=t[0],r=t[1];return N(w(a),r)}))}),[N,b]);var T=Object(r.useCallback)((function(){y((function(e){return a[w(e.start)]?Object(l.a)(Object(l.a)({},e),{},{start:e.start.minus(u.Duration.fromObject({days:1}))}):e}))}),[a]),D=Object(r.useMemo)((function(){var e=j()(Object.keys(a));return e.reduce((function(e,t){var r;return[].concat(Object(i.a)(e),Object(i.a)(null!==(r=a[t])&&void 0!==r?r:[]))}),[]).reduce((function(t,a,r){return r%Math.pow(e.length,2)===0?[].concat(Object(i.a)(t),[{label:u.DateTime.fromISO(a.time).toLocaleString(u.DateTime.DATETIME_SHORT),reserveRatio:parseInt(a.reserveRatio,10),stable:Math.round(100*parseFloat(a.stableCoinRatio))/100,reserve:parseInt(a.reserveCoinRatio,10)}]):t}),[])}),[a]);return Object(W.jsxs)("div",{className:"App container",children:[Object(W.jsx)("a",{className:"github-fork-ribbon",href:"https://github.com/bdkent/sigmausd-history","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub",target:"_blank",rel:"noreferrer",children:"Fork me on GitHub"}),Object(W.jsx)("h1",{children:"SigmaUSD History"}),Object(W.jsxs)("h2",{children:[b.start.toLocaleString(u.DateTime.DATE_FULL),!b.start.equals(b.end)&&Object(W.jsxs)(W.Fragment,{children:[" ","\u2014"," ",b.end.toLocaleString(u.DateTime.DATE_FULL)]})]}),Object(W.jsx)("button",{className:"btn btn-primary",onClick:T,children:"Load Previous Day"}),Object(W.jsx)("hr",{}),Object(W.jsx)("div",{className:"row",children:Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"Reserve Ratio (%)"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:D&&Object(W.jsx)(h.a,{width:"100%",height:200,children:Object(W.jsxs)(m.a,{width:730,height:250,data:D,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(O.a,{strokeDasharray:"3 3"}),Object(W.jsx)(x.a,{dataKey:"label"}),Object(W.jsx)(p.a,{}),Object(W.jsx)(f.a,{}),Object(W.jsx)(v.a,{type:"monotone",dataKey:"reserveRatio",stroke:"#8884d8"}),Object(W.jsx)(g.a,{y1:400,y2:800,fill:"green",opacity:.25,alwaysShow:!0})]})})})})]})})}),Object(W.jsxs)("div",{className:"row",children:[Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"SigmaUSD ($)"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:D&&Object(W.jsx)(h.a,{width:"100%",height:200,children:Object(W.jsxs)(m.a,{width:730,height:250,data:D,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(O.a,{strokeDasharray:"3 3"}),Object(W.jsx)(x.a,{dataKey:"label"}),Object(W.jsx)(p.a,{}),Object(W.jsx)(f.a,{}),Object(W.jsx)(v.a,{type:"monotone",dataKey:"stable",stroke:"#8884d8"})]})})})})]})}),Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"SigmaRSV"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:D&&Object(W.jsx)(h.a,{width:"100%",height:200,children:Object(W.jsxs)(m.a,{width:730,height:250,data:D,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(O.a,{strokeDasharray:"3 3"}),Object(W.jsx)(x.a,{dataKey:"label"}),Object(W.jsx)(p.a,{}),Object(W.jsx)(f.a,{}),Object(W.jsx)(v.a,{type:"monotone",dataKey:"reserve",stroke:"#8884d8"})]})})})})]})})]}),Object(W.jsx)("hr",{}),Object(W.jsx)("footer",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(W.jsx)("div",{className:"container-fluid",children:Object(W.jsx)("ul",{className:"navbar-nav",children:Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)("a",{href:"http://sigmausd.io",className:"nav-link",children:"sigmausd.io"})})})})})]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,347)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},q=a(44),B=a(183);q.b.register(B.a),s.a.render(Object(W.jsx)(n.a.StrictMode,{children:Object(W.jsx)(_,{})}),document.getElementById("root")),G()}},[[336,1,2]]]);
//# sourceMappingURL=main.52ee0cf9.chunk.js.map