{"version":3,"sources":["utils.ts"," jsstore_con.ts","DataService.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["nowDateRange","today","todayUTC","start","end","now","DateTime","toUTC","utc","year","month","day","toSlug","date","padStart","toString","JsStore","require","workerPath","default","connection","Connection","Worker","load","a","slug","url","process","fetch","resp","json","initDb","name","tables","columns","id","primaryKey","dataType","time","notNull","reserveRatio","stableCoinPrice","stableCoinRatio","reserveCoinPrice","reserveCoinRatio","isToday","equals","nextDate","plus","days","minus","minutes","select","from","where","low","toMillis","high","items","length","insert","into","upsert","values","map","i","fromISO","loadForDateRange","dates","Observable","subscriber","queue","PQueue","concurrency","on","next","error","addAll","loadForDate","then","is","complete","initialize","NullMarker","firstRecord","columnTitles","stable","reserve","columnFormatter","v","App","useState","data","setData","dateRange","setDateRange","selection","setSelection","undefined","timeRange","setTimeRange","useEffect","addNewData","useCallback","range","diff","n","subscribe","handleRangeChange","startDate","endDate","dr","fromJSDate","timeSeriesData","useMemo","allItems","sortBy","Object","keys","reduce","all","divisor","Math","max","ceil","chartData","acc","item","index","dateTime","toJSDate","parseInt","round","parseFloat","points","f","timeSeries","TimeSeries","pickerProps","value","maxDate","minDate","TimeRange","tracked","setTracked","ref","useRef","column","setColumn","tipAddress","addr","document","querySelector","content","includes","className","href","data-ribbon","title","target","rel","onChange","format","e","c","maxTime","minTime","timeAxisAngledLabels","timeAxisHeight","enablePanZoom","onTimeRangeChanged","onTrackerChanged","t","minDuration","height","current","offsetHeight","label","min","x","width","type","axis","position","breakLine","series","onSelectionChange","s","interpolation","event","atTime","markerLabel","get","markerRadius","markerLabelAlign","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c96ed82a.chunk.js","sourcesContent":["import { DateTime } from \"luxon\";\nimport { Slug } from \"./types\";\nimport padStart from 'lodash/padStart';\n\nexport function nowDateRange() {\n\n    const today = todayUTC();\n    return {\n        start: today, end: today\n    };\n}\n\nexport function todayUTC() {\n    const now = DateTime.now().toUTC();\n    return DateTime.utc(now.year, now.month, now.day);\n}\n\nexport function toSlug(date: DateTime): Slug {\n    return `${date.year}-${padStart(date.month.toString(), 2, '0')}-${padStart(date.day.toString(), 2, '0')}`\n}\n","const JsStore = require('jsstore');\n\n/* eslint-disable */\n\n\nconst getWorkerPath = () => {\n\n    // return dev build when env is development\n    if (process.env.NODE_ENV === 'development') {\n\n        return require(\"file-loader?name=scripts/[name].[hash].js!jsstore/dist/jsstore.worker.js\");\n\n    }\n    else { // return prod build when env is production\n\n        return require(\"file-loader?name=scripts/[name].[hash].js!jsstore/dist/jsstore.worker.min.js\");\n\n    }\n};\n\nconst workerPath = getWorkerPath().default;\nexport const connection = new JsStore.Connection(new Worker(workerPath));","\nimport { DateTime } from \"luxon\";\nimport PQueue from \"p-queue/dist/index\";\nimport { Observable } from \"rxjs\"\nimport { connection } from \"./ jsstore_con\";\nimport { Item } from \"./types\";\nimport { todayUTC, toSlug } from \"./utils\";\n\nasync function load(date: DateTime): Promise<Item[]> {\n    const slug = toSlug(date);\n    const url = `${process.env.PUBLIC_URL}/data/daily/${slug}.json`\n    // TODO: validate against schema https://github.com/pelotom/runtypes ?\n    const resp = await fetch(url);\n    return await resp.json();\n}\n\nasync function initialize() {\n    await connection.initDb({\n        name: 'sigmausd',\n        tables: [\n            {\n                name: 'Items',\n                columns: {\n                    id: { primaryKey: true, dataType: \"number\" },\n                    time: { notNull: true, dataType: \"string\" },\n                    reserveRatio: { notNull: true, dataType: \"string\" },\n                    stableCoinPrice: { notNull: true, dataType: \"string\" },\n                    stableCoinRatio: { notNull: true, dataType: \"string\" },\n                    reserveCoinPrice: { notNull: true, dataType: \"string\" },\n                    reserveCoinRatio: { notNull: true, dataType: \"string\" },\n                }\n            },\n        ]\n    });\n\n};\n\ninitialize();\n\n\n\nexport async function loadForDate(date: DateTime): Promise<Item[]> {\n    const today = todayUTC();\n    const isToday = today.equals(date)\n\n    if (!isToday) {\n        // check db\n        const nextDate = date.plus({ days: 1 }).minus({ minutes: 5 })\n\n        const items: Item[] = await connection.select({\n            from: \"Items\",\n            where: {\n                id: {\n                    '-': {\n                        low: date.toMillis(),\n                        high: nextDate.toMillis(),\n                    }\n                },\n            }\n        });\n\n        if (items.length > 0) {\n            return items;\n        }\n\n    }\n\n    const items = await load(date);\n\n    if (!isToday) {\n\n        await connection.insert({\n            into: 'Items',\n            upsert: true,\n            values: items.map(i => ({\n                ...i,\n                id: DateTime.fromISO(i.time).toMillis()\n            }))\n        })\n    }\n\n    return items;\n}\n\ntype DateRangeItems = [DateTime, Item[]]\n\nexport function loadForDateRange(dates: DateTime[]): Observable<DateRangeItems> {\n    return new Observable<DateRangeItems>(subscriber => {\n        const queue = new PQueue({ concurrency: 2 });\n        queue.on('completed', (items: DateRangeItems) => {\n            subscriber.next(items);\n        });\n        queue.on('error', error => {\n            subscriber.error(error);\n        });\n        queue.addAll(dates.map(date => (() => loadForDate(date).then(is => ([date, is] as const)))))\n            .then(() => subscriber.complete())\n    });\n};\n","import './App.scss';\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport 'whatwg-fetch';\nimport { DateTime, } from 'luxon';\nimport sortBy from 'lodash/sortBy';\n\n\nimport { DateRange, Item, Slug } from './types';\nimport { toSlug, nowDateRange } from './utils';\nimport { loadForDateRange } from './DataService';\nimport range from 'lodash/range';\nimport DateRangePicker from '@wojtekmaj/react-daterange-picker';\nimport {\n  Charts,\n  ChartContainer,\n  ChartRow,\n  YAxis,\n  LineChart,\n  Resizable,\n  Baseline,\n  EventMarker,\n\n} from \"react-timeseries-charts\";\nimport { TimeRange, TimeSeries } from 'pondjs';\n\nconst NullMarker = () => {\n  return <g />;\n};\n\nconst firstRecord = DateTime.utc(2021, 5, 9, 13, 38)\n\nconst columns = ['reserveRatio', 'stable', 'reserve'] as const\ntype ColumnTypes = typeof columns[number];\n\nconst columnTitles = {\n  reserveRatio: 'Reserve Ratio (%)',\n  stable: 'SigmaUSD Ratio ($)',\n  reserve: 'SigmaRSV Ratio',\n} as const;\n\nconst columnFormatter = {\n  reserveRatio: (v: string) => `${v} %`,\n  stable: (v: string) => `$${v}`,\n  reserve: (v: string) => v,\n} as const;\n\nconst App = (): JSX.Element => {\n\n  const [data, setData] = useState<{ [slug: string]: Item[] | undefined }>({});\n\n  const [dateRange, setDateRange] = useState<DateRange>(nowDateRange());\n\n  const [selection, setSelection] = useState<unknown>();\n\n\n  const [timeRange, setTimeRange] = useState<TimeRange | undefined>(undefined);\n\n  useEffect(() => {\n    setTimeRange(undefined);\n  }, [dateRange])\n\n\n\n  const addNewData = useCallback((slug: Slug, items: Item[]) => {\n    setData(data => ({\n      ...data,\n      [slug]: items,\n    }));\n  }, [])\n\n  useEffect(() => {\n    const nums = range(dateRange.end.diff(dateRange.start, 'days').days + 1);\n\n    const dts = nums.map(n => dateRange.start.plus({ days: n }));\n\n    loadForDateRange(dts).subscribe(([date, items]) => addNewData(toSlug(date), items))\n\n  }, [addNewData, dateRange]);\n\n  const handleRangeChange = useCallback((dateRange?: [Date, Date]) => {\n    if (!dateRange) {\n      setData({})\n      setDateRange(nowDateRange());\n    } else {\n      const [startDate, endDate] = dateRange;\n      setData({})\n      setDateRange(dr => {\n        const start = DateTime.fromJSDate(startDate)\n        const end = DateTime.fromJSDate(endDate);\n        if (start.equals(dr.start) && end.equals(dr.end)) {\n          return dr;\n        }\n        return {\n          start,\n          end,\n        }\n\n      })\n    }\n  }, [])\n\n  type Row = Readonly<[\n    date: Date,\n    reserveRatio: number,\n    stable: number,\n    reserve: number,\n    ms: number\n  ]>\n\n  const timeSeriesData = useMemo(() => {\n\n    const slugs = sortBy(Object.keys(data))\n\n    const allItems = slugs.reduce((all: Item[], slug) => {\n      return [...all, ...(data[slug] ?? [])];\n    }, []);\n\n    const divisor = Math.max(Math.ceil(allItems.length / 100), 1)\n\n    const chartData = allItems.reduce((acc: Readonly<Row>[], item, index) => {\n      if (index % divisor === 0) {\n        const dateTime = DateTime.fromISO(item.time);\n        return [\n          ...acc,\n          [\n            dateTime.toJSDate(),\n            parseInt(item.reserveRatio, 10),\n            Math.round(parseFloat(item.stableCoinRatio) * 100) / 100,\n            parseInt(item.reserveCoinRatio, 10),\n            dateTime.toMillis(),\n          ] as const\n        ]\n      } else {\n        return acc;\n      }\n    }, []);\n\n\n    if (!chartData?.length) {\n      return undefined;\n    }\n\n    const points = sortBy(chartData, f => f[4]);\n\n    return {\n      start: points[0]?.[0],\n      end: points[points.length - 1]?.[0],\n      timeSeries: new TimeSeries({\n        name: 'Data',\n        columns: ['time', ...columns],\n        points,\n      })\n    };\n  }, [data]);\n\n  const pickerProps = useMemo(() => ({\n    value: [dateRange.start.toJSDate(), dateRange.end.toJSDate()],\n    maxDate: DateTime.now().toJSDate(),\n    minDate: firstRecord.toJSDate(),\n  }), [dateRange])\n\n  useEffect(() => {\n    if (timeSeriesData) {\n      setTimeRange(new TimeRange(timeSeriesData.start, timeSeriesData.end))\n    } else {\n      setTimeRange(undefined);\n    }\n  }, [timeSeriesData])\n\n  const [tracked, setTracked] = useState<Date | undefined>()\n\n  const ref = useRef<HTMLDivElement>(null)\n\n  const [column, setColumn] = useState<ColumnTypes>('reserveRatio')\n\n  const tipAddress = useMemo(() => {\n    const addr = document.querySelector<HTMLMetaElement>('meta[name=tip]')?.content;\n    return addr?.includes('REACT_APP_TIP') ? undefined : addr;\n  }, []);\n\n  return (\n    <div className=\"App container min-vh-100 \">\n      <a className=\"github-fork-ribbon\" href=\"https://github.com/bdkent/sigmausd-history\" data-ribbon=\"Fork me on GitHub\" title=\"Fork me on GitHub\" target=\"_blank\" rel=\"noreferrer\">Fork me on GitHub</a>\n      <div className=\"d-flex flex-column min-vh-100\">\n        <div>\n          <h1>SigmaUSD History</h1>\n\n          <div className=\"d-flex flex-wrap\">\n            <div className=\"flex-fill\">\n              <DateRangePicker\n                {...pickerProps}\n                onChange={handleRangeChange}\n                format=\"MMM d, y\"\n              />\n            </div>\n            <div className=\"flex-fill\">\n              <select value={column} className=\"form-select\" onChange={(e) => {\n                setColumn(e.target.value as ColumnTypes)\n              }}>\n                {columns.map(c => (<option key={c} value={c}>{columnTitles[c]}</option>))}\n              </select>\n            </div>\n          </div>\n          <hr />\n        </div>\n        <div className=\"flex-grow-1 \" ref={ref}>\n          {timeSeriesData && (\n            <Resizable>\n              <ChartContainer\n                timeRange={timeRange}\n\n                maxTime={pickerProps.maxDate}\n                minTime={pickerProps.minDate}\n                timeAxisAngledLabels={true}\n                timeAxisHeight={65}\n\n                enablePanZoom={true}\n                onTimeRangeChanged={setTimeRange}\n                onTrackerChanged={(t: Date) => setTracked(t)}\n                minDuration={1000 * 60 * 60}\n              >\n                <ChartRow height={(ref.current?.offsetHeight ?? 400) * .75}>\n                  <YAxis\n                    id=\"y\"\n                    label={columnTitles[column]}\n                    min={timeSeriesData.timeSeries.min(column, (x: unknown) => x)}\n                    max={timeSeriesData.timeSeries.max(column)}\n                    width=\"60\"\n                    type=\"linear\"\n\n                  />\n                  <Charts>\n                    <Baseline axis=\"y\" value={400} label=\"400%\" position=\"left\" />\n                    <Baseline axis=\"y\" value={800} label=\"800%\" position=\"left\" />\n                    <LineChart\n                      axis=\"y\"\n                      breakLine={false}\n                      series={timeSeriesData.timeSeries}\n                      columns={[\"time\", column]}\n                      selection={selection}\n                      onSelectionChange={(s: unknown) =>\n                        setSelection(s)\n                      }\n                      interpolation=\"curveBasis\"\n\n                    />\n                    {tracked ?\n                      <EventMarker\n                        type=\"point\"\n                        axis=\"y\"\n                        event={timeSeriesData.timeSeries.atTime(tracked)}\n                        markerLabel={columnFormatter[column](`${timeSeriesData.timeSeries.atTime(tracked).get(column)}`)}\n                        column={column}\n                        markerRadius={3}\n                        markerLabelAlign=\"left\"\n                      /> : <NullMarker />\n                    }\n                  </Charts>\n                </ChartRow>\n              </ChartContainer>\n            </Resizable>\n          )}\n\n        </div>\n        <div>\n          <hr />\n          <footer className=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <div className=\"container-fluid\">\n              <ul className=\"navbar-nav\">\n                <li className=\"nav-item\">\n                  <a href=\"http://sigmausd.io\" className=\"nav-link\" target=\"_blank\" rel=\"noreferrer\">sigmausd.io</a>\n                </li>\n              </ul>\n              {tipAddress && <a href={`https://explorer.ergoplatform.com/en/addresses/${tipAddress}`} target=\"_blank\" rel=\"noreferrer\">&hearts; tips welcome</a> }\n            </div>\n          </footer>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n"],"sourceRoot":""}