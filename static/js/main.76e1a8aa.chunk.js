(this["webpackJsonpsigmausd-history"]=this["webpackJsonpsigmausd-history"]||[]).push([[0],{193:function(e,t,a){},195:function(e,t,a){},336:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(73),s=a.n(c),i=(a(193),a(25)),o=a(19),l=a.n(o),d=a(33),u=a(30),b=a(27),j=a(29),h=(a(195),a(196),a(38)),m=a(50),O=a.n(m),x=a(339),p=a(340),f=a(344),v=a(179),g=a(180),y=a(84),k=a(184),N=a(174),w=a(121),T=a.n(w);function D(){var e=h.DateTime.now().toUTC();return h.DateTime.utc(e.year,e.month,e.day)}function S(e){return"".concat(e.year,"-").concat(T()(e.month.toString(),2,"0"),"-").concat(T()(e.day.toString(),2,"0"))}var C=a(182),R=a(345),F=a(287),I=a(289).default,L=new F.Connection(new Worker(I));function M(e){return K.apply(this,arguments)}function K(){return(K=Object(d.a)(l.a.mark((function e(t){var a,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S(t),r="".concat("/sigmausd-history","/data/daily/").concat(a,".json"),e.next=4,fetch(r);case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=!1;function A(){return(A=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.initDb({name:"sigmausd",tables:[{name:"Items",columns:{id:{primaryKey:!0,dataType:"number"},time:{notNull:!0,dataType:"string"},reserveRatio:{notNull:!0,dataType:"string"},stableCoinPrice:{notNull:!0,dataType:"string"},stableCoinRatio:{notNull:!0,dataType:"string"},reserveCoinPrice:{notNull:!0,dataType:"string"},reserveCoinRatio:{notNull:!0,dataType:"string"}}}]});case 2:E=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(l.a.mark((function e(t){var a,r,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=D(),r=a.equals(t),!E||r){e.next=9;break}return n=t.plus({days:1}).minus({minutes:5}),e.next=6,L.select({from:"Items",where:{id:{"-":{low:t.toMillis(),high:n.toMillis()}}}});case 6:if(!((c=e.sent).length>0)){e.next=9;break}return e.abrupt("return",c);case 9:return e.next=11,M(t);case 11:if(s=e.sent,!E||r){e.next=15;break}return e.next=15,L.insert({into:"Items",upsert:!0,values:s.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:h.DateTime.fromISO(e.time).toMillis()})}))});case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return new R.a((function(t){var a=new C.a({concurrency:2});a.on("completed",(function(e){t.next(e)})),a.on("error",(function(e){t.error(e)})),a.addAll(e.map((function(e){return function(){return H(e)}}))).then((function(){return t.complete()}))}))}!function(){A.apply(this,arguments)}();var W=a(5),_=function(){var e=Object(r.useState)({}),t=Object(j.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(function(){var e=D();return{start:e,end:e}}()),s=Object(j.a)(c,2),o=s[0],m=s[1],w=Object(r.useCallback)((function(e,t){n((function(a){return Object(b.a)(Object(b.a)({},a),{},Object(u.a)({},e,t))}))}),[]);Object(r.useEffect)((function(){var e=S(o.start),t=S(o.end);(function(){var r=Object(d.a)(l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a[e]||U([o.start]).subscribe((function(t){return w(e,t)})),e===t||a[t]){r.next=8;break}return r.t0=w,r.t1=t,r.next=6,H(o.end);case 6:r.t2=r.sent,(0,r.t0)(r.t1,r.t2);case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}})()()}),[w,o,a]);var T=Object(r.useCallback)((function(){m((function(e){return a[S(e.start)]?Object(b.a)(Object(b.a)({},e),{},{start:e.start.minus(h.Duration.fromObject({days:1}))}):e}))}),[a]),C=Object(r.useMemo)((function(){var e=O()(Object.keys(a));return e.reduce((function(e,t){var r;return[].concat(Object(i.a)(e),Object(i.a)(null!==(r=a[t])&&void 0!==r?r:[]))}),[]).reduce((function(t,a,r){return r%Math.pow(e.length,2)===0?[].concat(Object(i.a)(t),[{label:h.DateTime.fromISO(a.time).toLocaleString(h.DateTime.DATETIME_SHORT),reserveRatio:parseInt(a.reserveRatio,10),stable:Math.round(100*parseFloat(a.stableCoinRatio))/100,reserve:parseInt(a.reserveCoinRatio,10)}]):t}),[])}),[a]);return Object(W.jsxs)("div",{className:"App container",children:[Object(W.jsx)("a",{className:"github-fork-ribbon",href:"https://github.com/bdkent/sigmausd-history","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub",target:"_blank",rel:"noreferrer",children:"Fork me on GitHub"}),Object(W.jsx)("h1",{children:"SigmaUSD History"}),Object(W.jsxs)("h2",{children:[o.start.toLocaleString(h.DateTime.DATE_FULL),!o.start.equals(o.end)&&Object(W.jsxs)(W.Fragment,{children:[" ","\u2014"," ",o.end.toLocaleString(h.DateTime.DATE_FULL)]})]}),Object(W.jsx)("button",{className:"btn btn-primary",onClick:T,children:"Load Previous Day"}),Object(W.jsx)("hr",{}),Object(W.jsx)("div",{className:"row",children:Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"Reserve Ratio (%)"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:C&&Object(W.jsx)(x.a,{width:"100%",height:200,children:Object(W.jsxs)(p.a,{width:730,height:250,data:C,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(f.a,{strokeDasharray:"3 3"}),Object(W.jsx)(v.a,{dataKey:"label"}),Object(W.jsx)(g.a,{}),Object(W.jsx)(y.a,{}),Object(W.jsx)(k.a,{type:"monotone",dataKey:"reserveRatio",stroke:"#8884d8"}),Object(W.jsx)(N.a,{y1:400,y2:800,fill:"green",opacity:.25,alwaysShow:!0})]})})})})]})})}),Object(W.jsxs)("div",{className:"row",children:[Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"SigmaUSD ($)"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:C&&Object(W.jsx)(x.a,{width:"100%",height:200,children:Object(W.jsxs)(p.a,{width:730,height:250,data:C,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(f.a,{strokeDasharray:"3 3"}),Object(W.jsx)(v.a,{dataKey:"label"}),Object(W.jsx)(g.a,{}),Object(W.jsx)(y.a,{}),Object(W.jsx)(k.a,{type:"monotone",dataKey:"stable",stroke:"#8884d8"})]})})})})]})}),Object(W.jsx)("div",{className:"col",children:Object(W.jsxs)("div",{className:" card text-dark bg-light mb-3",children:[Object(W.jsx)("div",{className:"card-header",children:"SigmaRSV"}),Object(W.jsx)("div",{className:"card-body ",children:Object(W.jsx)("div",{className:"reserveRatioChartWrapper",children:C&&Object(W.jsx)(x.a,{width:"100%",height:200,children:Object(W.jsxs)(p.a,{width:730,height:250,data:C,margin:{top:5,right:30,left:20,bottom:5},children:[Object(W.jsx)(f.a,{strokeDasharray:"3 3"}),Object(W.jsx)(v.a,{dataKey:"label"}),Object(W.jsx)(g.a,{}),Object(W.jsx)(y.a,{}),Object(W.jsx)(k.a,{type:"monotone",dataKey:"reserve",stroke:"#8884d8"})]})})})})]})})]}),Object(W.jsx)("hr",{}),Object(W.jsx)("footer",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(W.jsx)("div",{className:"container-fluid",children:Object(W.jsx)("ul",{className:"navbar-nav",children:Object(W.jsx)("li",{className:"nav-item",children:Object(W.jsx)("a",{href:"http://sigmausd.io",className:"nav-link",children:"sigmausd.io"})})})})})]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,347)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},q=a(44),B=a(183);q.b.register(B.a),s.a.render(Object(W.jsx)(n.a.StrictMode,{children:Object(W.jsx)(_,{})}),document.getElementById("root")),G()}},[[336,1,2]]]);
//# sourceMappingURL=main.76e1a8aa.chunk.js.map